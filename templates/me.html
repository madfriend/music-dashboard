<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gigs for {{ user | safe }}</title>
    <script type="text/javascript" src="https://unpkg.com/vue@2.2.1"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">

    <link rel="stylesheet" type="text/css" href="/static/css/app.css?{{ r }}"/>
</head>
<body>
    <main id="app">
        <aside v-if="artists.length > 0">
            <input class="new-artist" autofocus autocomplete="off"
                placeholder="New artist?" v-model="newArtist"
                @keyup.enter="addArtist"/>

            <transition-group name="list-complete" tag="div" class="artists-container">
                <div v-for="artist in sortedArtists" v-if="artistCache[artist]" class="list-complete-item" v-bind:key="artist">
                  (( artistCache[artist].name )) <span class="delete-icon" v-on:click="removeArtist(artist)">&times;</span>
                </div>
            </transition-group>

        </aside>

        <transition-group name="list-complete"
          tag="div" class="container" v-if="artists.length > 0">
            <div v-for="artist in sortedArtists" v-if="artistCache[artist]" v-bind:key="artist" class="card list-complete-item">
                <div class="img-wrap">
                    <span class="delete-icon" v-on:click="removeArtist(artist)">&times;</span>
                    <img v-bind:src="artistCache[artist].img" v-if="artistCache[artist].img.length"/>
                    <b class="title">(( artistCache[artist].name ))</b>
                </div>

                <div class="desc">
                    <div v-for="event in eventsCache[artistCache[artist].id]" class="event">
                        <a v-bind:href="event.url" target="_blank">
                            <b>(( event.location ))</b> (( event.date ))</a>
                    </div>
                </div>
            </div>
        </transition-group>
      <div class="quickstart" v-if="artists.length === 0">
        <span>I want to see
          <input class="new-artist-quickstart" autofocus autocomplete="off"
              placeholder="my favorite band" v-model="newArtist"
              @keyup.enter="addArtist"/>
        live.</span>
      </div>

    </main>

    <script type="text/javascript">
        var ARTISTS = {{ artists|safe }};
        var USER = "{{ user | safe }}";
    </script>

    <script type="text/javascript" src="/static/js/lastfm.js"></script>
    <script type="text/javascript" src="/static/js/songkick.js"></script>
    <script type="text/javascript" src="/static/js/app.js"></script>
</body>
</html>
